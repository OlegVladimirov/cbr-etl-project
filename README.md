# cbr-etl-project

![GitHub Actions](https://img.shields.io/github/actions/workflow/status/OlegVladimirov/cbr-etl-project/etl.yml?branch=main)
![Python](https://img.shields.io/badge/python-3.11-blue)
![Streamlit](https://img.shields.io/badge/Streamlit-%23FF4B4B.svg?style=for-the-badge&logo=Streamlit&logoColor=white)

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

1 –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ª–µ–∂–∞—Ç –Ω–∞ —Å–∞–π—Ç–µ –¶–µ–Ω—Ç—Ä–æ–±–∞–Ω–∫–∞ –†–§ https://www.cbr.ru/development/ "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã" ‚Üí "–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É—è XML". –° –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞ etl/etl_cbr_exchange_rates.py –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ë–î postgresql. –°–∫—Ä–∏–ø—Ç etl_cbr_exchange_rates.py –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å –ø–æ–º–æ—â—å—é Github Actions. –ó–¥–µ—Å—å –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏. –í –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ Apache airflow –∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å spark –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–æ–¥—É–ª—å pandas.

2 –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö postgresql, –≤ –∫–æ—Ç–æ—Ä—É—é —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–º render.com, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –≤ —Ñ–∞–π–ª–µ db/ddl.sql.

3 –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Streamlit. –î–∞—à–±–æ—Ä–¥ —Ö–æ—Å—Ç–∏—Ç—Å—è –Ω–∞ Streamlit Community Cloud, –∫–æ–¥ –≤ —Ñ–∞–π–ª–µ bi/streamlit_app.py, –∞–¥—Ä–µ—Å: https://cbr-etl-project.streamlit.app

![](./dashboard.png)


## üèóÔ∏è –ö–∞–∫ —ç—Ç–æ —É—Å—Ç—Ä–æ–µ–Ω–æ

1. üì• **Extract**: –î–∞–Ω–Ω—ã–µ –∑–∞–±–∏—Ä–∞—é—Ç—Å—è —Å `cbr.ru` (XML).
2. üßπ **Transform**: –û—á–∏—â–∞—é—Ç—Å—è –∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –≤ `pandas`.
3. üíæ **Load**: –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PostgreSQL –Ω–∞ Render.com.
4. üìä **Visualize**: –î–∞—à–±–æ—Ä–¥ –Ω–∞ Streamlit.
5. üîÑ **Schedule**: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ GitHub Actions (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ).


## üõ†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- üîÅ –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ **Airflow** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏.
- üìà –î–æ–±–∞–≤–∏—Ç—å **–º–µ—Ç—Ä–∏–∫–∏ –¶–ë –†–§** (–∫–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞, –∏–Ω—Ñ–ª—è—Ü–∏—è, –æ–±—ä—ë–º –¥–µ–Ω–µ–∂–Ω–æ–π –º–∞—Å—Å—ã).
- üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Supabase** –∫–∞–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
- üì¶ –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤ **Docker**.
- üß™ –î–æ–±–∞–≤–∏—Ç—å **unit-—Ç–µ—Å—Ç—ã**.
- üîê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Hashicorp Vault** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏.


### –î—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞ —Å–∞–π—Ç–µ –¶–ë –†–§
* –ö–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞ https://cbr.ru/Queries/UniDbQuery/ValuesRu?From=01.01.2020&To=01.01.2025&P=2510
* –ò–Ω—Ñ–ª—è—Ü–∏—è https://cbr.ru/Queries/UniDbQuery/ValuesRu?P=261
* –û–±—ä—ë–º –¥–µ–Ω–µ–∂–Ω–æ–π –º–∞—Å—Å—ã (–ú2) https://cbr.ru/Queries/UniDbQuery/ValuesRu?P=271
* –†–µ–µ—Å—Ç—Ä –±–∞–Ω–∫–æ–≤ https://www.cbr.ru/credit/Institut/

